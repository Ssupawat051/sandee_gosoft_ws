<launch>
	<master auto="start"/>
	<param name="use_sim_time" value="false"/>

	<!-- Start laser scan -->
	<node pkg="rplidar_ros" type="rplidarNode" name="rplidarNode" output="screen">
		<param name="serial_port" type="string" value="/dev/ttyUSB0"/>
	</node>

	<!-- Start arduino serial interface -->
	<node pkg="rosserial_arduino" type="serial_node.py" name="rosserial" respawn="true" args="_port:=/dev/ttyUSB1"/>

	<!-- Setup transformation -->
	<!--node pkg="tf" type="static_transform_publisher" name="map_to_base" args="0 0 0 0 0 0 map base_link 100"/>
	<node pkg="tf" type="static_transform_publisher" name="odom_to_base" args="0 0 0 0 0 0 odom base_link 100"/> -->

	<node pkg="tf" type="static_transform_publisher" name="base_link_to_laser_frame" args="0.0 0.0 0.0 0.0 0.0 0.0 base_link laser_frame 100" /> 

	<!-- Publish URDF to TF -->
  	<!-- <node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher" output="screen">
    <param name="publish_frequency" type="double" value="100.0"/>
    <param name="tf_prefix" type="string" value=""/>
  	</node > -->

	<!--param name="robot_description" command="$(find xacro)/xacro inorder '$(find sandee_ws)/src/urdf_sandee/urdf/urdf_sandee.urdf'" /-->


	<!-- Run odometry setup node -->
	<node pkg="odom_setup" type="odom" name="odometryNode" output="screen"/>

	<!-- Run the map server -->
	<node pkg="map_server" type="map_server" name="map_server" args="/home/sandee/final_map.yaml"/>

	<!-- Run AMCL -->
	<include file="$(find amcl)/examples/amcl_diff.launch" /> 

	<!-- Run move base -->
	
	<node pkg="move_base" type="move_base" name="move_base" respawn="true" output="screen">
		<rosparam file="src/costmap_common_params.yaml" command="load" ns="global_costmap"/>
		<rosparam file="src/costmap_common_params.yaml" command="load" ns="local_costmap"/>
		<rosparam file="src/local_costmap_params.yaml" command="load"/>
		<rosparam file="src/global_costmap_params.yaml" command="load"/>
		<rosparam file="src/move_base_params.yaml" command="load"/>
		<rosparam file="src/teb_local_planner_params.yaml" command="load"/>
 	</node>
	
	<include file="$(find urdf_sandee)/launch/display.launch" /> 
	
	<!-- <node pkg="simple_navigation_goals" type="sim_goals" name="sim_goals" output="screen" /> --> 

</launch>
